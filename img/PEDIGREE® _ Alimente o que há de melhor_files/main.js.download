var mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
var screenWidth = $(window).width();
var screenHeight = $(window).height();
var test = true;
var resState;
var hasCheck = true;
var browserIE = 0;
function calcWidth(screenWidth) {

    if (screenWidth >= 1 && screenWidth <= 750) {
        resState = 10;
    } else if (screenWidth >= 751 && screenWidth <= 974) {
        resState = 20;
    } else if (screenWidth >= 975 && screenWidth <= 1183) {
        resState = 30;
    } else {
        resState = 40;
    }
    //console.log(resState, $(window).innerWidth() + ' / ' + $('.resState').width());
};
//alert(screenWidth);
/* Safari Mac Detect */
(function ($) {
    if (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Mac') != -1 && navigator.userAgent.indexOf('Chrome') == -1) {
        $('.content').addClass('safari-mac');
    }
    var ua = window.navigator.userAgent;
    var msie = ua.indexOf("MSIE ");
    if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./)) {
        $('.content').addClass('IE');
        browserIE = 1;
    }
})(jQuery);
/* Safari Mac Detect */

/*  */
function fakeButtons() {
    var fakeButtons = $('.fake-button');
    var fakeButtonsURL;
    var fakeButtonsTarget
    fakeButtons.click(function () {
        fakeButtonsURL = $(this).attr('href');
        fakeButtonsTarget = $(this).attr('target');
        if (fakeButtonsTarget == undefined) {
            window.location.href = fakeButtonsURL;
        } else {
            window.open(fakeButtonsURL, fakeButtonsTarget);
        }
    });
}

/* Mobile Menu */
function mobileMenu() {
    $('.menu-icon').click(function () {
        $(this).toggleClass('active');
        $('.header .menu .menu-content').slideToggle(500).css('display', 'inline-block').toggleClass('active');
        if ($('.m-filter .filter-content').hasClass('active')) {
            $('.m-filter .filter-content').slideUp('slow').removeClass('active');
            $('.filter-icon.product-filter').removeClass('active')
        }
    });
    $('.submenu-button').click(function () {
        if (resState <= 30) {
            if (!$(this).hasClass('active')) {
                $('.submenu-button.active').children('.menu-sub').slideUp(500).removeAttr('style');
                $('.submenu-button.active').removeClass('active');
                $(this).toggleClass('active');
                $(this).children('.menu-sub').slideToggle(500).css('display', 'inline-block');
            } else {
                $(this).toggleClass('active');
                $(this).children('.menu-sub').slideToggle(500).css('display', 'inline-block');
            }
        }
    });
}
/* Mobile Menu */

/* Menu */

function globalMenu() {
    if (resState >= 40) {
        $('.menu-content').css('display', 'inline-block');
    } else {
        $('.menu-content').removeAttr('style');
        $('.menu-icon').removeClass('active');
    }



    var menu = $('.header .menu li');
    menu.hover(function () {
        //aa = $(this).children('ul');
        //aa.slideDown('slow');
    }, function () {
        //$('.menu-sub').slideUp('slow');
    });

}

function fixedMenu() {
    var contentSrollTop = window.scrollY;
    var content2SrollTop = $('html').scrollTop();
    //console.log(contentSrollTop);

    if (contentSrollTop >= 1 || content2SrollTop >= 1) {
        if (!$('.content').hasClass('header-fixed') && resState >= 30) {
            //console.log('true');
            //$('.content').addClass('header-fixed');
        }
    } else {
        //console.log('false');
        //$('.content').removeClass('header-fixed');
    }
    var navHeight = 30;//$('.menu ul').offset().top;
    if ($(window).scrollTop() > navHeight && resState >= 40) {
        if (!$('.content').hasClass('header-fixed')) {
            $('.content').addClass('header-fixed');
        }
    }
    else {
        $('.content').removeClass('header-fixed');
    }
    if (resState <= 20 && $(window).height() < 300) {
        $('.menu-content').css('height', $(window).height() - 50);
    }
    if (resState <= 20) {
        $('.menu-content').css('max-height', $(window).height() - 50);
    }
}

function jFixer() {
    //if ($('.sticky')) {
    //    $('.sticky').fixer({
    //        gap: 51
    //    });
    //}
}

/* Menu */


/* Slider */

var homeSlider = '.home .swiper-container';
var productSlider = '.product .swiper-container';
var productDetailSlider = '.product-details-slider .swiper-container';
var articlesDetailSlider = '.article-details-slider .swiper-container';
var breedsLandingSlider = ' .breed-landing-slider .swiper-container';
var breedsFilterSlider = '.filter-slider-breeds .swiper-container';
var sliderType = $('.slider').attr('data-type');

function swiperBreedLandingSlider() {
    var perView = screenWidth / 40;
    var mySwiperBreedLanding = new Swiper(breedsLandingSlider, {
        pagination: false,
        loop: false,
        grabCursor: false,
        paginationClickable: true,
        simulateTouch: true,
        autoplay: false,
        autoResize: true,
        spaceBetween: 0,
        slidesPerView: perView,
    });
    $('.breed-landing-slider.slider .arrow.right').click(function () {
        mySwiperBreedLanding.swipeNext();
    });
}

function swiperBreedsFilterSlider() {
    var mySwiperBreedsFilter = new Swiper(breedsFilterSlider, {
        loop: false,
        grabCursor: false,
        simulateTouch: false,
        speed: 700,
        autoplay: false,
        onSlideChangeEnd: function () {
            var activeSlide = mySwiperBreedsFilter.activeIndex;
            if (activeSlide == 2) {
                $('.filter-content .button a.next-button').hide();
            } else if (activeSlide == 0) {
                $('.filter-content .button a.prev-button').hide();
                $('.filter-content .button a.next-button.product-filter2').show();
            } else {
                $('.filter-content .button a').css('display', 'inline-block');
                $('.filter-content .button a.next-button.product-filter2').hide();
            }

        }

    });
    $('.filter-content .button a.next-button').click(function () {
        mySwiperBreedsFilter.swipeNext();
    });
    $('.filter-content .button a.prev-button').click(function () {
        mySwiperBreedsFilter.swipePrev();
    });
}

function swiperMainSlider() {

    var mySwiperHome = new Swiper(homeSlider, {
        pagination: '.pagination',
        loop: true,
        grabCursor: false,
        paginationClickable: true,
        simulateTouch: false,
        speed: 700,
        //autoplay: 6000,
        autoplay: false,
    });


    if (browserIE == "0") {
    } else {
        //Browser IE
        //mySwiperHome.params.loop = true;
        //mySwiperHome.reInit();
    }

    $('.home.slider .arrow.right').click(function () {
        mySwiperHome.swipeNext();

    });
    $('.home.slider .arrow.left').click(function () {
        mySwiperHome.swipePrev();
    });
}

function productsSlider() {
    var mySwiperProduct = new Swiper(productSlider, {
        loop: false,
        grabCursor: false,
        simulateTouch: false,
        speed: 700,
        autoplay: false,
        onSlideChangeEnd: function () {
            var activeSlide = mySwiperProduct.activeIndex;
            $('.product-pagination span.active').removeClass('active');
            $('.product-pagination span:eq(' + activeSlide + ')').addClass('active');
        }
    });
    $('.slider .arrow.right').click(function () {
        mySwiperProduct.swipeNext();
    });
    $('.slider .arrow.left').click(function () {
        mySwiperProduct.swipePrev();
    });
    var pagination = $('.product-pagination span');
    pagination.click(function () {
        if (!$(this).hasClass('active')) {
            pagination.removeClass('active');
            $(this).addClass('active');
            mySwiperProduct.swipeTo($(this).index());
        }
    });
}
function swiperProductDetailSlider() {
    var mySwiperProductDetail = new Swiper(productDetailSlider, {
        pagination: false,
        loop: false /*true*/,
        grabCursor: false,
        paginationClickable: true,
        simulateTouch: true,
        autoplay: false,
        slidesPerView: 7,
        spaceBetween: 30

    });
    $('.slider .arrow.right').click(function () {
        mySwiperProductDetail.swipeNext();
    });
    $('.slider .arrow.left').click(function () {
        mySwiperProductDetail.swipePrev();
    });
    $('.productDetailSliderClose').click(function () {
        $('.filter-dropdown').animate({
            height: 1
        }, 500);
    });
    $('.productDetailSliderOpen').click(function () {
        $('.filter-dropdown').animate({
            height: "250px"
        }, 500);
    });
}
function swiperArticlesDetailSlider() {
    var mySwiperArticlesDetail = new Swiper(articlesDetailSlider, {
        pagination: false,
        loop: true,
        grabCursor: false,
        paginationClickable: true,
        simulateTouch: false,
        autoplay: false,
        slidesPerView: 4,
        spaceBetween: 30

    });
    $('.slider .arrow.right').click(function () {
        mySwiperArticlesDetail.swipeNext();
    });
    $('.slider .arrow.left').click(function () {
        mySwiperArticlesDetail.swipePrev();
    });
    $('.articlesDetailSliderClose').click(function () {
        $('.filter-dropdown').animate({
            height: 1
        }, 500);
    });
    $('.articlesDetailSliderOpen').click(function () {
        $('.filter-dropdown').animate({
            height: "250px"
        }, 500);
    });
}
/* Slider */

/* Product Filter */
var productTagList = [];
var productNameList = [];
var breedTagList = [];

function productFilter() {
    $('.filter-button.product-filter').click(function () {
        $('.filter-viewing .filter-content').fadeIn('slow');
    });
    $('.product-filter .close-button').click(function () {
        $('.filter-viewing .filter-content').fadeOut('slow');
    });
    $('.product-filter-2 .close-btn').click(function () {
        $('.filter-viewing .filter-content').fadeOut('slow');
    });
    $('.product-filter-2 .refresh-btn').click(function () {

        productTagList = [];
        productNameList = [];
        getProductList(productTagList);

        $('.filter-content a').removeClass('active');

        $('.filter-elements').html('');
        $('.filter-elements').append('<li>Todos os Produtos</li>');
    });

    $('.filter-content ul li a').click(function () {
        if ($(this).attr('class') != "refresh-btn") {

            var tag = $(this).attr('data-tag');
            var tagType = $(this).attr('data-tagType');
            var text = $(this).text();

            if (!$(this).hasClass('active')) {
                productTagList.push({ 'tag': tag, 'tagType': tagType });
                productNameList.push({ 'name': text });
            } else {
                //Remove From List
                productTagList = productTagList.filter(function (el) {
                    return el.tag !== tag;
                });
                productNameList = productNameList.filter(function (el) {
                    return el.name !== text;
                });
            }
            if (tag == "Small Breeds" || tag == "Medium and Large Breeds" || tag == "Large Breeds") {
                tag = tag.toLowerCase().replace(/\ /g, '-');
                $('.' + tag).toggleClass('active');
            }
            else if (tag == "Adult 7+") {
                tag = "Senior";
                $('.' + tag).toggleClass('active');
            }
            else {
                $('.' + tag).toggleClass('active');
            }

            //Fill Breadcrumb
            $('.filter-elements').html('');
            if (productTagList != null && productTagList.length > 0) {
                $.each(productNameList, function (index, item) {
                    $('.filter-elements').append('<li>' + item.name + '</li>');
                });
            } else {
                $('.filter-elements').append('<li>Todos os Produtos</li>');
            }
            //Fill Breadcrumb End

            //Get PProduct List
            getProductList(productTagList);
        }
    });

    $('.filter-icon.product-filter').click(function () {
        $(this).toggleClass('active');
        $('.m-filter .filter-content').slideToggle(500).css('display', 'inline-block').toggleClass('active');
        if ($('.header .menu .menu-content').hasClass('active')) {
            $('.header .menu .menu-content').slideUp('slow').removeClass('active');
            $('.menu-icon').removeClass('active')
        }
    });
    $('.filter-icon.breeds-filter ,.filter-icon.product-filter-2').click(function () {
        $(this).toggleClass('active');
        $('.m-filter .filter-content').slideToggle(500).css('display', 'inline-block').toggleClass('active');
        if ($('.header .menu .menu-content').hasClass('active')) {
            $('.header .menu .menu-content').slideUp('slow').removeClass('active');
            $('.menu-icon').removeClass('active')
        }
        if ($(this).hasClass('active')) {
            swiperBreedsFilterSlider();
        };

    });
    $('.breed-finder').click(function () {
        $('.filter-viewing .filter-content').fadeIn('slow');
    });
    $('.breed-filter .close-button').click(function () {
        $('.filter-viewing .filter-content').fadeOut('slow');
    });
    $('.breed-filter .clear-button').click(function () {
        $('.filter-content a').removeClass('active');
    });

}

/* Product Filter */
function getProductList(productTagList) {
    loader(true);
    var parsingTag = JSON.stringify(productTagList);
    //Ajax start
    $.ajax({
        cache: false,
        type: "POST",
        url: '/OurProducts/_AjaxProductListResult',
        data: { 'productTagList': parsingTag },
        traditional: true,
        success: function (data) {
            $('.productList').html('');
            $('.productList').html(data);
            loader(false);
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert('Failed to retrieve books.');
        }
    });
    //Ajax End
};

/* Accordion */
var accordion = $('.accordion');
var accordionContent = $('.accordion-content');
function accordionDefault() {
    accordion.click(function () {
        if (!$(this).hasClass('active')) {
            if (resState <= 10) {
                $(this).addClass('active');
                $(this).children('.accordion-content').show();
            }
        } else {
            if (resState <= 10) {
                $(this).removeClass('active');
                $(this).children('.accordion-content').hide();
            }
        }
    });
}
function accordionResize() {
    if (resState >= 20) {
        accordion.removeClass('active');
        accordionContent.removeAttr('style');
    } else {
        //accordion.removeClass('active');
        //accordionContent.removeAttr('style');
    }
}
/* Accordion */

/* Home Articles */
function homePageArticles() {
    var filhote = [];
    var adulto = [];
    var senior = [];

    $.ajax({
        url: '/json/main-page-articles',
        dataType: 'json',
        //async: false,
        success: function (response) {
            $.each(response, function (key, obj) {
                switch (obj.Category) {
                    case 'filhotes':
                        filhote.push(obj);
                        break;
                    case 'adultos':
                        adulto.push(obj);
                        break;
                    case 'senior':
                        senior.push(obj);
                        break;
                }
            });

            // First Set
            mainArticlelooping(0, filhote);
            mainArticlelooping(1, adulto);
            mainArticlelooping(2, senior);

            // Loop for other articles
            var firstValue = 0;

            setInterval(function () {
                if (firstValue > 0) {
                    switch (firstValue) {
                        case 1:
                            mainArticlelooping(0, filhote);
                            break;
                        case 2:
                            mainArticlelooping(1, adulto);
                            break;
                        case 3:
                            mainArticlelooping(2, senior);
                            firstValue = 0;
                            break;
                    }
                };

                firstValue++;

            }, 2000);

        },
        error: function (a, b, error) {
            //alert(error);
        }
    });
    var loopCount = 0;
    var articleBlackList = [];
    function mainArticlelooping(articleDivIndex, arrayObj) {

        if (articleBlackList.length > 0 && articleBlackList != null) {
            $.each(articleBlackList, function (index, title) {
                arrayObj = arrayObj.filter(function (item) {
                    return item.Title !== title;
                })
            });
        }

        var item = arrayObj[Math.floor(Math.random() * arrayObj.length)];

        articleBlackList[articleDivIndex] = item.Title;

        var currentListItem = $('.list .articles .list-item')[articleDivIndex];

        var articles = '<div class="image before col-xs-12">';


        var articles = '<div class="image before col-xs-12">';
        articles += '<a onclick = "gaSend(\'Button\', \'Article-saiba-mais\', \'' + item.Title + '\');" href="' + item.Link + '"><img src="/asset/img/articles/home/articles-' + item.ImageSubCategory + '.png" alt="' + item.Link + '" /></a>';
        articles += '</div>';

        articles += '<div class="title before col-xs-12">';
        articles += '<span>' + item.SubCategory + '</span>';
        articles += '</div>';


        articles += '<div class="description col-xs-12">';
        articles += '<p>' + item.Title + '</p>';
        articles += '<a onclick = "gaSend(\'Button\', \'Article-saiba-mais\', \'' + item.Title + '\');" href="' + item.Link + '" class="more-link">Saiba mais</a>';
        articles += '</div>';
        articles += '<div class="button col-xs-12">';


        articles += '<a onclick = "gaSend(\'Button\', \'SUA SELEÇÃO\', \'' + item.Category + '\');" href="artigos/' + item.Category + '" class="more-button">VEJA OS ARTIGOS</a>';
        articles += '</div>';


        $(currentListItem).find('.articles').fadeOut(function () {
            $(currentListItem).find('.articles').html(articles);
        });

        $(currentListItem).find('.articles').fadeIn(500);

    }
}
/* Home Articles */


/* Articles Loader */
function articlesLoader() {
    $('.articles-icon li').click(function () {
        $('html,body').animate({
            scrollTop: $('.articles-icon').offset().top - 150
        }, '500');
        var category = $(this).attr("data-category");
        var lifestage = $(this).attr("data-lifestage");

        $('.articles-icon li').removeClass("active");
        $(this).addClass("active");

        getArticlesListByTag(category, lifestage);

    });
}
/* Articles Loader */

function getArticlesListByTag(category, lifestage) {
    loader(true);

    $.ajax({
        url: "/artigos/ajax-article-list-result?category=" + category + "&lifestage=" + lifestage,
        type: 'GET',
        dataType: 'html',
        success: function (response) {
            $("#divArticleList").html('');
            $("#divArticleList").html(response);
            $('#divArticleList .list-item').fadeIn(500).css('display', 'inline-block');

            loader(false);
        },
        error: function (xhr, ajaxOptions, thrownError) {

            alert('Failed to retrieve books.');
        }

    });

}


/* Form Validation*/
function formValidation() {
    var options = {
        closeText: 'Fermer',
        prevText: '&#x3c;Préc',
        nextText: 'Suiv&#x3e;',
        currentText: 'Aujourd\'hui',
        monthNames: ['Janeiro', 'Fevereiro', 'MarMarços', 'Abril', 'MaiMaio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
        monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun',
		'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
        dayNames: ['Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado', 'Domingo'],
        dayNamesShort: ['Seg', 'Ter', 'Quar', 'Quin', 'Sex', 'Sába', 'Domin'],
        dayNamesMin: ['Se', 'Te', 'Qua', 'Qui', 'Se', 'Sáb', 'Dom'],
        weekHeader: 'Sm',
        changeMonth: true,
        changeYear: true,
        yearRange: '-100:-13',
        reverseYearRange: true,
        defaultDate: '-13y',
        onSelect: function (date) {
            var dob = new Date(date);
            var today = new Date();
            var age = Math.floor((today - dob) / (365.25 * 24 * 60 * 60 * 1000));

            if (age < 13) {

                $("#birthdayErrorMessage").show();
                $("#birthdayErrorMessage").html("Você deve ser maior de 13 anos de idade");
                return false;
            }
            else {

                $("#birthdayErrorMessage").hide();
            }
        }
    }


    var options2 = {
        closeText: 'Fermer',
        prevText: '&#x3c;Préc',
        nextText: 'Suiv&#x3e;',
        currentText: 'Aujourd\'hui',
        monthNames: ['Janeiro', 'Fevereiro', 'MarMarços', 'Abril', 'MaiMaio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
        monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun',
		'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
        dayNames: ['Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado', 'Domingo'],
        dayNamesShort: ['Seg', 'Ter', 'Quar', 'Quin', 'Sex', 'Sába', 'Domin'],
        dayNamesMin: ['Se', 'Te', 'Qua', 'Qui', 'Se', 'Sáb', 'Dom'],
        weekHeader: 'Sm',
        changeMonth: true,
        changeYear: true,
        yearRange: '-100:+13',
        reverseYearRange: true,

    }

    $("#date-picker,#date-picker2, #Birthday").datepicker(options).attr('readonly', 'readonly').css('cursor', 'pointer');
    $("#BestBeforeDate").datepicker(options2).attr('readonly', 'readonly').css('cursor', 'pointer');

    var v = 1;
    $("#refreshbutton").on('click', function () {
        $(".captcha_img").removeAttr('src');
        $(".captcha_img").attr('src', '/Captcha/Show?v=' + v);
        v++;
    });

    function validateEmail(sEmail) {
        var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
        if (filter.test(sEmail)) {
            return true;
        }
        else {
            return false;
        }
    };


    var required = $('.required');
    $('#contact-form').submit(function () {

        var errcount = 0;
        var emailAddress = $('.email-adress').val();
        var reason = $('#Reason').val();

        if (reason == "") {
            errcount++;
        }

        $('.alertMessage').remove();

        required.each(function () {
            requiredValue = $(this).val();
            requiredDataValue = $(this).attr('data-value');
            if (requiredValue == '' || requiredValue == requiredDataValue) {
                $(this).after('<span class="col-xs-12 alertMessage">Campos obrigatórios</span>').addClass('alerts');
                errcount++;
            } else if (requiredValue != '' || requiredValue != requiredDataValue) {
                if ($(this).attr('type') == 'email') {
                    if (validateEmail(requiredValue)) {
                        $(this).removeClass('alerts');
                    } else {
                        $(this).after('<span class="col-xs-12 alertMessage">Por favor, preencher campo "Endereço de e-mail"</span>').addClass('alerts');
                        errcount++;
                    }

                } if ($(this).hasClass('confirm-mail')) {
                    if (emailAddress != requiredValue) {
                        $(this).after('<span class="col-xs-12 alertMessage">E-mail de confirmação diferente do e-mail inserido</span>').addClass('alerts');
                        errcount++;
                    } else {
                        $(this).removeClass('alerts');
                    }
                } else {
                    $(this).removeClass('alerts');
                }
            }


        });

        var captcha = $("#CaptchaValue").val();
        var captchacheck = $("#InvisibleCaptchaValue").val();


        if (captcha == "") {

            $("#captchaErrorMessage").html("<span class='col-xs-12 alertMessage'>Por favor, digite os caracteres da imagem.</span>");
            $("#captchaErrorMessage").show();
            errcount++;
            return false;
        }
        else {

            $.ajax({
                url: "/AboutUs/CheckCaptcha?CaptchaValue=" + captcha,
                type: 'post',
                async: false,
                dataType: 'json',
                success: function (response) {
                    if (response == "1") {
                        $("#captchaErrorMessage").html("<span class='col-xs-12 alertMessage'>Errado! Digite os caracteres que aparecem na imagem.</span>");
                        $("#captchaErrorMessage").show();
                        errcount++;
                        return false;
                    } else {
                        return true;
                    }
                }
            });
        }
        if (errcount == 0) {
            return true;
        }
        else {
            return false;
        }
    });

    $(".pronone").css("display", "none");
    $("#Reason").change(function () {

        var type = $(this).val();

        if (type == "Product") {
            $(".pronone").css("display", "block");
        }
        else {
            $(".pronone").css("display", "none");
        }

    });
}
/* Form Validation*/


/* Video Player */
function videoPlayer() {
    var video;
    $('.video-play').click(function () {
        $('.popup , .video-content').fadeOut(500);
        $('iframe').remove();
        var videoType = $(this).attr('video-type');
        var videoUrl = $(this).attr('video-url');
        var videoContent = $(this).attr('video-content');
        if (videoType == 'youtubeVideo') {
            video = '<iframe width="100%" src="https://www.youtube-nocookie.com/embed/' + videoUrl + '?rel=0" frameborder="0" allowfullscreen></iframe>';
            $('.popup').fadeIn(500);
            $(videoContent).append(video);
        } else if (videoType == 'HTML5') {
            video = '<video autoplay controls><source src="/asset/video/' + videoUrl + '.mp4" type="video/mp4"><source src="/asset/video/' + videoUrl + '.ogv" type="video/ogg"><source src="/asset/video/' + videoUrl + '.webm" type="video/webm"></video>';
            $(videoContent).append(video).fadeIn(500);
        }

    });
    $('.video-close').click(function () {
        $('iframe').remove();
        var videoType = $(this).attr('video-type');
        var videoContent = $(this).attr('video-content');
        if (videoType == 'youtubeVideo') {
            $('.popup').fadeOut(500);
        } else if (videoType == 'HTML5') {
            $('.video-content').fadeOut(500);
        }
    });

    $('.video-background').click(function () {
        document.querySelector('.video-background video').pause();


        var videoUrl    = $(this).attr('video-url'),
            video       = '<iframe width="100%" src="https://www.youtube-nocookie.com/embed/' + videoUrl + '?rel=0" frameborder="0" allowfullscreen></iframe>';
        $('.lightbox-content').html(video);
        $('.lightbox, .lightbox .button-close').fadeIn(500);
    });

    $('.button-close').click(function () {
        $('.lightbox, .lightbox .button-close').fadeOut(500);
        $('iframe').remove();
        if (!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            document.querySelector('.video-background video').play();
        }
    });
}
/* Video Player */

/* Looder */
function loader(loaderType) {
    loaderClass = $('.looder');
    if (loaderType == true) {
        loaderClass.fadeIn(500);
    } else {
        loaderClass.fadeOut(500);
        //$('.content').css('visibility', 'visible');
    }
}

/* Buy Online */
function buyOnline() {
    var buyOnline = $('.buy-online');
    var buyOnlineDescriptionElem = $('.buy-online-description');
    var buyOnlineButton = $('.buyonline-button');
    var buyOnlineClose = $('.buyonline-close');

    $('body').on('click', '.buyonline-button', function () {
        var productName = $(this).attr('data-productName');
        var productImage = $(this).attr('data-product-image');
        var productDescription = $(this).attr('data-description');
        var buyOnlineDescription = $(this).attr('data-buy-online-description');

        var jsonText = JSON.stringify(eval('(' + $(this).attr('data-dealer') + ')'));
        var jsonDealers = JSON.parse(jsonText);

        /*json variables: dealerLink, dealerImage*/
        var buyOnlineresult = '<div class="description align-left col-xs-12">';
        buyOnlineresult += '<h1>' + productName + '</h1>';
        buyOnlineresult += '<p>' + productDescription + '</p>';
        buyOnlineresult += '<img src="' + productImage + '" />';
        buyOnlineresult += '</div>';
        buyOnlineresult += '<p>' + buyOnlineDescription + '</p>';
        buyOnlineresult += '<div class="description col-xs-12"><p>Clique abaixo para comprar:</p></div>';
        buyOnlineresult += '<ul class="product-logo col-xs-12">';
        $.each(jsonDealers, function () {
            buyOnlineresult += '<li><a href="' + this.dealerLink + '" class="pull-href" target="_blank"><img src="' + this.dealerImage + '" /></a></li>';
        });

        buyOnlineresult += '</ul>';

        if (!buyOnline.hasClass('active')) {
            buyOnlineDescriptionElem.append(buyOnlineresult);
            if ($(this).attr('data-position') == 'fixed') {
                buyOnline.css('position', 'fixed');
            }
            buyOnline.fadeIn(500).addClass('active');
            if (resState <= 10) {
                $('html,body').animate({ scrollTop: buyOnline.offset().top - 51 }, 1000);
            } else {
                $('html,body').animate({ scrollTop: buyOnline.offset().top }, 1000);
            }
        }
    });

    buyOnlineClose.click(function () {
        buyOnlineDescriptionElem.html('');
        buyOnline.fadeOut(500).removeClass('active');
    });
}
/* Buy Online */

$(document).ready(function () {
    loader(false);
    globalMenu();
    mobileMenu();
    calcWidth(screenWidth);
    if (sliderType == 'homeSlider') {
        swiperMainSlider();
    } else if (sliderType == 'productSlider') {
        productsSlider();
    } else if (sliderType == 'productDetailSlider' && resState >= 30) {
        swiperProductDetailSlider();
    } else if (sliderType == 'articlesDetailSlider' && resState >= 30) {
        swiperArticlesDetailSlider();
    } else if (sliderType == 'breedsFilterSlider' && resState <= 20) {
        //swiperBreedsFilterSlider();
    }
    swiperBreedLandingSlider();
    homePageArticles();
    articlesLoader();
    productFilter();
    accordionDefault();
    jFixer();
    formValidation();
    buyOnline();
    videoPlayer();
    fakeButtons();
});
$(window).bind('load', function () {

});
$(window).bind('resize', function () {
    screenWidth = $(window).innerWidth();
    screenHeight = $(window).innerHeight();
    calcWidth(screenWidth);
    globalMenu();
    accordionResize();
});
$(window).bind('scroll', function () {
    fixedMenu();
});
$(window).on('hashchange', function () {
    //hasCheck=true;
    //aboutUsHashCheck();
});

(function () {
   
    function ajustaAlturaTopo() {
        if ($('.sec-cookies').is(':visible')) {
            var alturaCookie = $('.sec-cookies').outerHeight()
        } else {
            var alturaCookie = 0;
        }
        //console.log(alturaCookie)
        if ($(window).width() > 1024) {
            $('.sec.header').parent('.content').css({
                'margin-top': alturaCookie + 'px'
            })
        } else {
            $('.sec.header').css({
                'margin-top': (alturaCookie) + 'px'
            })
            $('.sec.header').parent('.content').css({
                'margin-top': alturaCookie + 'px'
            })
        }
    }

    ajustaAlturaTopo();

    setTimeout(ajustaAlturaTopo, 1000);
   

    $('.button-close').on('click', function () {
        $('.sec-cookies').slideUp()

        if ($(window).width() > 1024) {
            $('.sec.header').parent('.content').css({
                'margin-top': 0
            })
        } else {
            $('.sec.header').css({
                'margin-top': 0
            })
            $('.sec.header').parent('.content').css({
                'margin-top': 0
            })
        }
        setStorage('avisoCookie', 'visitado')
        //console.log(localStorage.getItem('avisoCookie'))
        setTimeout(ajustaAlturaTopo, 500);
    })

    var visitado = localStorage.getItem('avisoCookie')
    if (visitado === 'visitado') {
        $('.sec-cookies').hide()
        if ($(window).width() > 1024) {
            $('.sec.header').parent('.content').css({
                'margin-top': 0
            })
        } else {
            $('.sec.header').css({
                'margin-top': 0
            })
            $('.sec.header').parent('.content').css({
                'margin-top': 0
            })
        }
    }
})()

function setStorage(name, valor) {
    localStorage.setItem(name, valor)
}
